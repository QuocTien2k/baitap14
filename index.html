<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Memory Card Flip Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <style>
    body {
      background: #0f172a;
      color: #fff;
      min-height: 100vh;
    }

    h1 {
      font-weight: 700;
    }

    /* Game grid */
    .game-board {
      max-width: 600px;
      margin: auto;
    }

    /* Card container */
    .memory-card {
      perspective: 1000px;
      cursor: pointer;
    }

    .card-inner {
      position: relative;
      width: 100%;
      padding-top: 100%;
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }

    .memory-card.flip .card-inner {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      border-radius: 12px;
      backface-visibility: hidden;
      user-select: none;
    }

    .card-front {
      background: #1e293b;
      border: 2px solid #334155;
    }

    .card-back {
      background: #38bdf8;
      color: #0f172a;
      transform: rotateY(180deg);
      font-size: 3rem;
    }

    /* Hover effect */
    .memory-card:hover .card-front {
      background: #334155;
    }

    .matched .card-back {
      background: #22c55e;
      color: #022c22;
    }

    @media (max-width: 576px) {
      .card-back {
        font-size: 2.2rem;
      }
    }
  </style>

  <body>
    <main class="container py-4">
      <header class="text-center mb-4">
        <h1>ðŸ§  Memory Card Game</h1>
        <p class="mb-1">Láº­t tháº» vÃ  tÃ¬m cÃ¡c cáº·p giá»‘ng nhau</p>
        <p>Moves: <strong id="moves">0</strong></p>
        <button class="btn btn-warning btn-sm mt-2" onclick="resetGame()">
          ðŸ”„ ChÆ¡i láº¡i
        </button>
      </header>

      <section class="game-board">
        <div class="row g-3" id="gameBoard"></div>
      </section>
    </main>

    <script>
      const symbols = ["ðŸŽ", "ðŸŒ", "ðŸ‡", "ðŸ’"];
      let cards = [];
      let firstCard = null;
      let secondCard = null;
      let lockBoard = false;
      let moves = 0;
      let matchedPairs = 0;

      const board = document.getElementById("gameBoard");
      const movesEl = document.getElementById("moves");

      function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
      }

      function createCards() {
        cards = shuffle([...symbols, ...symbols]);
        board.innerHTML = "";
        matchedPairs = 0;
        moves = 0;
        movesEl.textContent = 0;

        cards.forEach((symbol) => {
          const col = document.createElement("div");
          col.className = "col-6 col-md-3";

          col.innerHTML = `
          <div class="memory-card" data-symbol="${symbol}">
            <div class="card-inner">
              <div class="card-face card-front">?</div>
              <div class="card-face card-back">${symbol}</div>
            </div>
          </div>
        `;

          col.querySelector(".memory-card").addEventListener("click", flipCard);

          board.appendChild(col);
        });
      }

      function flipCard() {
        if (lockBoard) return;
        if (this === firstCard) return;

        this.classList.add("flip");

        if (!firstCard) {
          firstCard = this;
          return;
        }

        secondCard = this;
        moves++;
        movesEl.textContent = moves;

        checkMatch();
      }

      function checkMatch() {
        const isMatch = firstCard.dataset.symbol === secondCard.dataset.symbol;

        isMatch ? disableCards() : unflipCards();
      }

      function disableCards() {
        firstCard.classList.add("matched");
        secondCard.classList.add("matched");

        firstCard.removeEventListener("click", flipCard);
        secondCard.removeEventListener("click", flipCard);

        matchedPairs++;
        resetTurn();

        if (matchedPairs === symbols.length) {
          setTimeout(() => {
            alert(`ðŸŽ‰ Báº¡n Ä‘Ã£ tháº¯ng sau ${moves} lÆ°á»£t!`);
          }, 300);
        }
      }

      function unflipCards() {
        lockBoard = true;

        setTimeout(() => {
          firstCard.classList.remove("flip");
          secondCard.classList.remove("flip");
          resetTurn();
        }, 800);
      }

      function resetTurn() {
        [firstCard, secondCard] = [null, null];
        lockBoard = false;
      }

      function resetGame() {
        firstCard = null;
        secondCard = null;
        lockBoard = false;
        createCards();
      }

      createCards();
    </script>
  </body>
</html>
